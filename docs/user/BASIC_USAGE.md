# 基本的な使用方法

KoeMoji-Goの基本的な操作方法について説明します。

## 📋 目次

- [クイックスタート](#クイックスタート)
- [対応ファイル形式](#対応ファイル形式)
- [コマンド一覧](#コマンド一覧)
- [設定項目](#設定項目)
- [録音機能](#録音機能)
- [基本的なトラブル対処](#基本的なトラブル対処)

## クイックスタート

### 1. 実行
```bash
./koemoji-go
```
初回実行時は自動的にデフォルト設定で起動

### 2. 設定
実行後に`c`キーで設定変更

### 3. ファイル処理
1. `input/`に音声・動画ファイルを配置
2. 自動的に文字起こし開始
3. 結果は`output/`に保存
4. 処理済みファイルは`archive/`に移動

## 対応ファイル形式

### 入力形式
**音声ファイル**: mp3, wav, m4a, flac, ogg, aac  
**動画ファイル**: mp4, mov, avi

### 出力形式
**テキスト形式**: txt, vtt, srt, tsv, json

## コマンド一覧

### 起動オプション
```bash
./koemoji-go -version     # バージョン表示
./koemoji-go -help        # ヘルプ表示
./koemoji-go -configure   # 設定モード
./koemoji-go -debug       # デバッグモード
./koemoji-go --tui        # TUIモード（ターミナル）
```

### 実行中コマンド（TUIモード）
- `c` - 設定変更
- `l` - ログ表示
- `r` - 録音開始/停止
- `s` - 手動スキャン
- `i` - 入力ディレクトリを開く
- `o` - 出力ディレクトリを開く
- `q` - 終了
- `Enter` - 画面更新

## 設定項目

設定画面（`c`キー）での主要な設定項目を説明します。

### 基本設定（Basicタブ）

#### 文字起こし設定
- **項目1 - whisper_model**: 認識精度
  - `tiny`: 最高速・低精度
  - `small`: 高速・普通精度  
  - `medium`: 中速・高精度（推奨）
  - `large-v3`: 低速・最高精度

- **項目2 - language**: 認識言語
  - `ja`: 日本語
  - `en`: 英語
  - `auto`: 自動検出

- **項目3 - ui_language**: UI表示言語
  - `ja`: 日本語
  - `en`: 英語

- **項目4 - output_format**: 出力形式
  - `txt`: プレーンテキスト（推奨）
  - `vtt`: WebVTT字幕
  - `srt`: SRT字幕

#### 監視・処理設定
- **項目5 - scan_interval_minutes**: 監視間隔（分）
  - `1`: 1分ごと（推奨）
  - `5`: 5分ごと
  - `10`: 10分ごと

- **項目6 - max_cpu_percent**: CPU使用率制限
  - `95`: 最大使用率（推奨）
  - `50`: 控えめ使用率

- **項目7 - compute_type**: 計算精度
  - `int8`: 高速・低メモリ（推奨）
  - `float16`: 中速・中メモリ
  - `float32`: 低速・高メモリ

#### UI設定
- **項目8 - use_colors**: 色表示
  - `true`: カラー表示（推奨）
  - `false`: モノクロ表示

### ディレクトリ設定（Directoriesタブ）

- **項目9 - input_dir**: 入力フォルダ
  - デフォルト: `./input`

- **項目10 - output_dir**: 出力フォルダ
  - デフォルト: `./output`

- **項目11 - archive_dir**: アーカイブフォルダ
  - デフォルト: `./archive`

### 録音設定

- **項目19 - recording_device_id**: 録音デバイスID
  - `-1`: 既定デバイス（推奨）
  - `0以上`: 特定デバイスのID

- **項目20 - recording_device_name**: デバイス名（表示用）

## 録音機能

### 基本操作
1. `r`キーで録音開始
2. 録音中は画面上部に🔴録音中 - 時間表示
3. 再度`r`キーで録音停止
4. `recording_YYYYMMDD_HHMM.wav`として自動保存
5. 次回スキャンで自動的に文字起こし開始

### 録音デバイス設定
- `c`キーで設定画面を開き、項目19で録音デバイスを選択
- 既定マイク、特定デバイス、仮想デバイスに対応

### 高度な録音設定
**システム音声+マイク同時録音**など、詳細な設定方法は [録音機能セットアップガイド](RECORDING_SETUP.md) を参照してください。

## ファイル処理の流れ

### 1. ファイル配置
```
input/
├── meeting_20240623.mp3      # 処理待ち
├── interview.wav             # 処理待ち
└── presentation.mp4          # 処理待ち
```

### 2. 自動処理
- 設定した間隔で`input/`フォルダを監視
- 新しいファイルを検出すると処理開始
- 順次処理（同時に複数ファイルは処理しない）

### 3. 結果出力
```
output/
├── meeting_20240623.txt      # 文字起こし結果
├── interview.txt             # 文字起こし結果
└── presentation.txt          # 文字起こし結果
```

### 4. アーカイブ
```
archive/
├── meeting_20240623.mp3     # 処理済みファイル
├── interview.wav            # 処理済みファイル
└── presentation.mp4         # 処理済みファイル
```

## UIモード

### GUIモード（デフォルト）
```bash
./koemoji-go
```
- ボタンクリックで操作
- 設定ダイアログ
- ファイルブラウザ統合

### TUIモード
```bash
./koemoji-go --tui
```
- キーボード操作
- ターミナル内で完結
- サーバー環境に適している

## 基本的なトラブル対処

### ファイルが処理されない
1. ファイル形式が対応しているか確認
2. `input/`フォルダに正しく配置されているか確認
3. ファイルが他のプログラムで開かれていないか確認
4. ログ（`l`キー）でエラーを確認

### 文字起こし精度が悪い
1. より高精度なモデル（large-v3）に変更
2. 音声品質を確認（ノイズ、音量等）
3. 適切な言語設定を確認

### 処理が遅い
1. より高速なモデル（small/medium）に使用
2. CPU使用率制限を上げる
3. compute_typeをint8に設定

### 依存関係エラー
```bash
# FasterWhisper
pip install faster-whisper whisper-ctranslate2

# 録音機能（macOS）
brew install portaudio pkg-config
```

### 権限エラー
```bash
chmod +x koemoji-go
```

### ログ確認
```bash
# 実行中のログ表示
l キーを押す

# ログファイル直接確認
cat koemoji.log | tail -20
```

## 関連ドキュメント

- **[AI機能ガイド](AI_FEATURES.md)** - AI要約機能の詳細設定
- **[録音セットアップガイド](RECORDING_SETUP.md)** - 高度な録音設定
- **[トラブルシューティング](TROUBLESHOOTING.md)** - 詳細な問題解決

---

## 💡 使用のコツ

### ファイル命名
- 日付を含める: `meeting_20240623.mp3`
- 内容を示す: `interview_john_doe.wav`
- 連番使用: `lecture_01.mp4`, `lecture_02.mp4`

### 音声品質向上
- 録音時は静かな環境で
- マイクを話者に近づける
- 音量レベルを適切に調整
- 可能であればモノラル録音

### 効率的な処理
- 長時間録音は分割して処理
- 処理中は他の重い作業を避ける
- 定期的にアーカイブフォルダを整理